function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===r&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".breadcrumb{display:flex;align-items:center;height:45px;background:#fff;padding:4px 20px 0;border-bottom:1px solid #f0f2f5}.breadcrumb .breadcrumb__separator{display:inline-block;margin:0 8px;font-weight:700;color:#c0c4cc;font-size:.8em}.breadcrumb .breadcrumb__item{color:#999;text-decoration:none;font-size:14px}.breadcrumb .breadcrumb__item.is-navigative:hover{color:#c8132d;cursor:pointer}.breadcrumb .breadcrumb__item.router-link-active{color:#606266}.breadcrumb .breadcrumb__item.breadcrumb__item-active{font-weight:400;color:#606266;cursor:text}");var i=function(){function r(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(this,r),this._$el=t,this._init(n,a),this._$tpl=this._createBreadcrumbElement(),this._mount()}var n,i,o;return n=r,o=[{key:"_booly",value:function(e){if(e&&("boolean"==typeof e||["true","false"].includes(e.toLowerCase())))return"boolean"==typeof e?e:"true"===e.toLowerCase()}},{key:"_okv",value:function(e,t){return t=t||"name",r._nestedV(t.indexOf(".")>-1?t:[t],e)}},{key:"_nestedV",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=Array.isArray(e)?e:e.split(r);return n.reduce((function(e,t){return e&&e[t]}),t)}},{key:"filterOpts",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if(e.separator&&"string"==typeof e.separator&&(n.separator=e.separator),t&&t.hasOwnProperty("routable")){var a=r._booly(t.routable);void 0!==a&&(n.routable=a)}return e.paths&&Array.isArray(e.paths)&&(n.paths=e.paths.map((function(e){var t={};return t.name=r._okv(e,e.meta&&e.meta.title?"meta.title":"name"),t.to=n.routable&&r._okv(e,e.path?"path":"to"),t}))),n}}],(i=[{key:"destroy",value:function(){this._unmount()}},{key:"_init",value:function(e,t){this._opts=a(a({},r._defaults),r.filterOpts(e,t))}},{key:"update",value:function(e){e&&(this._init(e.arg),this._replaceMount(this._createBreadcrumbElement()))}},{key:"_mount",value:function(){this._$tpl&&this._$el&&this._$el.insertAdjacentElement("afterbegin",this._$tpl)}},{key:"_replaceMount",value:function(e){this._$tpl&&this._$el&&(this._$el.replaceChild(e,this._$tpl),this._$tpl=e)}},{key:"_unmount",value:function(){this._$tpl&&this._$tpl.parentNode&&this._$tpl.parentNode.removeChild(this._$tpl)}},{key:"_clearMounted",value:function(){if(this._$tpl&&this._$tpl.innerHTML)for(var e in this._$tpl.childNodes)if(this._$tpl.childNodes.hasOwnProperty(e)){var t=this._$tpl.childNodes[e];this._$tpl.removeChild(t)}}},{key:"_createBreadcrumbElement",value:function(e){var t,r=this;return this.opts&&this.opts.paths?(e||(t=document.createElement("div")).setAttribute("class","breadcrumb"),this.opts.paths.map((function(e){var n=e.name,a=e.to,i=a?"a":"span",o=r.opts.paths.indexOf(e)===r.opts.paths.length-1,s=document.createElement(i);return r._cla(s,"breadcrumb__item"),a&&r._cla(s,"is-navigative"),a&&r._setAttr(s,"href",a),o&&r._cla(s,"breadcrumb__item-active"),s.innerText=n,t.appendChild(s),!o&&t.appendChild(r._createSeparatorElement()),s})),t):null}},{key:"_createSeparatorElement",value:function(e){var t=document.createElement("span");return this._setAttr(t,"class","breadcrumb__separator"),t.innerText=this.opts.separator,t}},{key:"_cla",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"==typeof t&&e&&this._isElement(e)&&e.classList)if(r){var n=e.classList.value.replace(this.options.class,t);this._setAttr(e,"class",n)}else e.classList.add(t)}},{key:"_setAttr",value:function(e,t,r){"string"==typeof t&&"string"==typeof r&&t&&r&&e&&this._isElement(e)&&e.classList&&e.setAttribute(t,r)}},{key:"_isElement",value:function(e){return e instanceof window.Element}},{key:"opts",get:function(){return a({},this._opts)}}])&&t(n.prototype,i),o&&t(n,o),r}();i._defaults=a({},{separator:"/",paths:[],routable:!0}),i.install=function(e,t){e.directive("breadcrumb",{params:["paths","separator"],bind:function(e,r,n){if(e.breadcrumb)e.breadcrumb.update(r.value);else{var a=n.context.$watch("$route",(function(t,r){e.breadcrumb.update({arg:{paths:t.matched}})}));n.context.unwatch||(n.context.unwatch=a),e.breadcrumb=new i(e,r.value||{paths:n.context.$route.matched},t)}},update:function(e,t){e.breadcrumb&&t.arg&&e.breadcrumb.update(t)},unbind:function(e,t,r,n){r.context.unwatch(),e.breadcrumb.destroy()}})};export default i;
