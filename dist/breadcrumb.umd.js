!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).breadcrumb={})}(this,(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===r&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".breadcrumb{display:flex;align-items:center;height:45px;background:#fff;padding:4px 20px 0;border-bottom:1px solid #f0f2f5}.breadcrumb .breadcrumb__separator{display:inline-block;margin:0 8px;font-weight:700;color:#c0c4cc;font-size:.8em}.breadcrumb .breadcrumb__item{color:#999;text-decoration:none;font-size:14px}.breadcrumb .breadcrumb__item.is-navigative:hover{color:#c8132d;cursor:pointer}.breadcrumb .breadcrumb__item.router-link-active{color:#606266}.breadcrumb .breadcrumb__item.breadcrumb__item-active{font-weight:400;color:#606266;cursor:text}");var o=function(){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t(this,e),this._$el=r,this._init(n,a),this._$tpl=this._createBreadcrumbElement(),this._mount()}var n,a,o;return n=e,o=[{key:"_booly",value:function(e){if(e&&("boolean"==typeof e||["true","false"].includes(e.toLowerCase())))return"boolean"==typeof e?e:"true"===e.toLowerCase()}},{key:"_okv",value:function(t,r){return r=r||"name",e._nestedV(r.indexOf(".")>-1?r:[r],t)}},{key:"_nestedV",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=Array.isArray(e)?e:e.split(r);return n.reduce((function(e,t){return e&&e[t]}),t)}},{key:"filterOpts",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if(t.separator&&"string"==typeof t.separator&&(n.separator=t.separator),r&&r.hasOwnProperty("routable")){var a=e._booly(r.routable);void 0!==a&&(n.routable=a)}return t.paths&&Array.isArray(t.paths)&&(n.paths=t.paths.map((function(t){var r={};return r.name=e._okv(t,t.meta&&t.meta.title?"meta.title":"name"),r.to=n.routable&&e._okv(t,t.path?"path":"to"),r}))),n}}],(a=[{key:"destroy",value:function(){this._unmount()}},{key:"_init",value:function(t,r){this._opts=i(i({},e._defaults),e.filterOpts(t,r))}},{key:"update",value:function(e){e&&(this._init(e.arg),this._replaceMount(this._createBreadcrumbElement()))}},{key:"_mount",value:function(){this._$tpl&&this._$el&&this._$el.insertAdjacentElement("afterbegin",this._$tpl)}},{key:"_replaceMount",value:function(e){this._$tpl&&this._$el&&(this._$el.replaceChild(e,this._$tpl),this._$tpl=e)}},{key:"_unmount",value:function(){this._$tpl&&this._$tpl.parentNode&&this._$tpl.parentNode.removeChild(this._$tpl)}},{key:"_clearMounted",value:function(){if(this._$tpl&&this._$tpl.innerHTML)for(var e in this._$tpl.childNodes)if(this._$tpl.childNodes.hasOwnProperty(e)){var t=this._$tpl.childNodes[e];this._$tpl.removeChild(t)}}},{key:"_createBreadcrumbElement",value:function(e){var t,r=this;return this.opts&&this.opts.paths?(e||(t=document.createElement("div")).setAttribute("class","breadcrumb"),this.opts.paths.map((function(e){var n=e.name,a=e.to,i=a?"a":"span",o=r.opts.paths.indexOf(e)===r.opts.paths.length-1,s=document.createElement(i);return r._cla(s,"breadcrumb__item"),a&&r._cla(s,"is-navigative"),a&&r._setAttr(s,"href",a),o&&r._cla(s,"breadcrumb__item-active"),s.innerText=n,t.appendChild(s),!o&&t.appendChild(r._createSeparatorElement()),s})),t):null}},{key:"_createSeparatorElement",value:function(e){var t=document.createElement("span");return this._setAttr(t,"class","breadcrumb__separator"),t.innerText=this.opts.separator,t}},{key:"_cla",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"==typeof t&&e&&this._isElement(e)&&e.classList)if(r){var n=e.classList.value.replace(this.options.class,t);this._setAttr(e,"class",n)}else e.classList.add(t)}},{key:"_setAttr",value:function(e,t,r){"string"==typeof t&&"string"==typeof r&&t&&r&&e&&this._isElement(e)&&e.classList&&e.setAttribute(t,r)}},{key:"_isElement",value:function(e){return e instanceof window.Element}},{key:"opts",get:function(){return i({},this._opts)}}])&&r(n.prototype,a),o&&r(n,o),e}();o._defaults=i({},{separator:"/",paths:[],routable:!0}),o.install=function(e,t){e.directive("breadcrumb",{params:["paths","separator"],bind:function(e,r,n){if(e.breadcrumb)e.breadcrumb.update(r.value);else{var a=n.context.$watch("$route",(function(t,r){e.breadcrumb.update({arg:{paths:t.matched}})}));n.context.unwatch||(n.context.unwatch=a),e.breadcrumb=new o(e,r.value||{paths:n.context.$route.matched},t)}},update:function(e,t){e.breadcrumb&&t.arg&&e.breadcrumb.update(t)},unbind:function(e,t,r,n){r.context.unwatch(),e.breadcrumb.destroy()}})},e.default=o,Object.defineProperty(e,"__esModule",{value:!0})}));
